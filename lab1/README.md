# Описание проекта Daemon

Данный проект реализует демон — фоновый процесс, который выполняется на вашем сервере в фоновом режиме. Этот демон предназначен для периодической очистки заданной папки от файлов с расширением `.tmp`. В реальной жизни такой демон может использоваться для автоматического обслуживания системы: очистки временных файлов, логов или кэша, которые более не нужны, что помогает экономить место и поддерживать порядок в файловой системе.

## Конфигурация

Перед запуском проекта необходимо указать пути к вашим папкам и параметры времени:

1. В файле `daemon.cpp` измените строку:
```cpp
daemon->readConfig("/path/to/daemon_project/config.txt");
```
заменив `/path/to/daemon_project/config.txt` на актуальный путь к файлу конфигурации `config.txt` в вашем проекте.

2. В файле `config.txt` укажите:
   - Путь к папке, где будут храниться временные `.tmp` файлы. Например, `/home/vboxuser/Downloads/projects/lab1/test_dir1` (замените на ваш путь).
   - Интервал времени (в секундах) между проверками папки. Например, `30` секунд.

Для запуска демона и проверки его работы создайте несколько .tmp файлов в указанной папке (например, `test_dir1`), чтобы наблюдать, как демон их удаляет по установленному интервалу.

## Запуск демона

1. Убедитесь, что вы находитесь в папке проекта `lab1`. Чтобы проверить это, выполните:
```bash
pwd
```
Если вы не находитесь в папке lab1, выполните команду:
```bash
cd /путь/до/lab1
```

2. Сделайте скрипт сборки исполняемым:
```bash
chmod +x build.sh
```

3. Соберите проект:
```bash
./build.sh
```
После успешной сборки появится исполняемый файл daemon. Вы можете проверить его наличие командой:
```bash
ls
```

4. Запустите демона:
```bash
sudo ./daemon
```
Примечание: при выполнении команды sudo система может запросить ваш пароль.

## Проверка логов

Для удобного отслеживания ошибок и информации о работе демона можно просмотреть системный журнал:
```bash
tail -f /var/log/syslog
```

## Остановка демона

Если вы хотите остановить демон, воспользуйтесь одним из способов:
1. Найдите его PID (идентификатор процесса) с помощью команды:
```bash
ps aux | grep daemon
```
Затем завершите процесс, выполнив:
```bash
sudo kill -SIGTERM <PID>
```

2. Или используйте команду:
```bash
sudo kill -SIGTERM $(cat /tmp/daemon.pid)
```

### Проверка завершения демона

После выполнения команды выше можно убедиться, что демон остановился, проверив отсутствие PID-файла:
```bash
ls /tmp/daemon.pid
```
Если файл отсутствует, демон завершился корректно.
